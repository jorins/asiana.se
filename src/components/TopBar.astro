---
import { Icon } from 'astro-icon/components'

import { Localisation, getLocaleFromUrl, setUrlLocale, languages } from '../lib/i18n'

const lang = getLocaleFromUrl(Astro.url)
const l = new Localisation(lang)
---

<nav class="top-bar">
  {Object.keys(languages).map(langCode =>
  <a
    href={setUrlLocale(Astro.url, langCode)}
    title={l.get('ui', `lang.${langCode}`)}
    hreflang={langCode}
  >
    <Icon
      name=`circle-flags:lang-${langCode}`
      size="4rem"
      style="margin: 1rem;"
    />
  </a>
  )}
</nav>

<style lang="scss">
@use "../styles/defs";

.top-bar {
  height: defs.$top-bar-height;

  display: flex;
  justify-content: flex-end;
  flex-direction: row;
  flex-wrap: nowrap;
  align-items: stretch;
}

.languages {
  display: flex;
  flex-direction: row;
  align-items: center;
}

.page-nav {
  flex-grow: 1;
}

</style>
