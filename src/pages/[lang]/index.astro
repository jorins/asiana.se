---
export { getStaticPaths } from '../../lib/util'

import { getEntry, render } from 'astro:content'

import Layout from '../../layouts/Layout.astro';

import Countdown from '../../components/Countdown.astro'
import OpeningHours from '../../components/OpeningHours.astro'
import AnchorButton from '../../components/AnchorButton.astro'
import ContactInfo from '../../components/ContactInfo.astro'
import Section from '../../components/Section.astro'

import * as strings from  '../../lib/strings'
import { getAndRender } from '../../lib/util'
import { useLangFromUrl } from '../../i18n/utils'
import { getCollection } from 'astro:content';

const t = useLangFromUrl(Astro.url)
const hero = await getAndRender(Astro.url, 'hero')
const location = await getAndRender(Astro.url, 'location')
const food = await getAndRender(Astro.url, 'food')
const drinks = await getAndRender(Astro.url, 'drinks')
---

<Layout>
  <div class="hero-wrapper">
    <div class="hero">
      <h1 class="title">ASIANA</h1>
      <Countdown />
      <hero.Content />
      <div class="doubling-block">
        <div><AnchorButton href={strings.orderLink} grow=1>{t.nav.order}</AnchorButton></div>
        <div><AnchorButton href="#location" grow=1>{t.nav.locate}</AnchorButton></div>
        <div><OpeningHours /></div>
        <div><ContactInfo /></div>
      </div>
    </div>
  </div>

  <Section
    id="location"
    containerColor="red"
    imageUrl="/img/map.jpg"
    imageHref={strings.mapLink}
    imageAlt="..."
    imageAlign="left"
  >
    <location.Content />
    <AnchorButton href={strings.mapLink}>{t.nav.showOnMaps}</AnchorButton>
  </Section>

  <Section
    id="food"
    containerColor="black"
    imageUrl="/img/pexels-mdsnmdsnmdsn-3728295-crop.jpg"
    imageAlt="..."
    imageAlign="right"
  >
    <food.Content />
    <div class="button-collection">
      <AnchorButton href={strings.orderLink}>{t.nav.order}</AnchorButton>
      <AnchorButton href="food">{t.nav.readMore}</AnchorButton>
    </div>
  </Section>

  <Section
    id="drinks"
    containerColor="red"
    imageUrl="/img/pexels-rdne-6412836-crop.jpg"
    imageAlt="..."
    imageAlign="left"
  >
    <drinks.Content />
    <AnchorButton href="drinks">{t.nav.readMore}</AnchorButton>
  </Section>
</Layout>

<style lang="scss">
@use 'sass:color';
@use "../../styles/defs";

.hero-wrapper {
  min-height: calc(100vh - defs.$top-bar-height);

  background-image: url('/img/pexels-christel-heimdal-jensen-628776-resize.jpg');
  background-attachment: local;
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}

.hero {
  box-sizing: border-box;
  min-height: calc(100vh - defs.$top-bar-height);
  width: defs.$max_width;
  max-width: 100vw;

  margin: auto;
  padding: 0 4rem;

  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: center;
  align-items: center;

  background-color: color.change(defs.$background, $alpha: defs.$transparent-alpha);
}

.doubling-block {
  display: flex;

  flex-direction: column;
  flex-wrap: wrap;
  justify-content: center;
  align-items: stretch;
  gap: 1rem;

  > div {
    flex-grow: 1;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    width: 30rem;
    max-width: 100%;
  }

  @include defs.desktop {
    flex-direction: row;
  }
}

.title {
  font-size: min(10rem, 20vw);
  font-weight: 300;
  letter-spacing: 0.15em;
  margin: 0;
}

</style>
